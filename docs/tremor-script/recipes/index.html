<!doctype html>
<html lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-beta.ff31de0ff">
<link rel="alternate" type="application/rss+xml" href="/blog/rss.xml" title="Tremor Blog RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/blog/atom.xml" title="Tremor Blog Atom Feed"><title data-react-helmet="true">Recipes | Tremor</title><meta data-react-helmet="true" property="og:url" content="https://www.tremor.rs//docs/tremor-script/recipes"><meta data-react-helmet="true" name="docusaurus_locale" content="en"><meta data-react-helmet="true" name="docusaurus_version" content="0.11"><meta data-react-helmet="true" name="docusaurus_tag" content="docs-default-0.11"><meta data-react-helmet="true" property="og:title" content="Recipes | Tremor"><meta data-react-helmet="true" name="description" content="This document provides a few recipes for common patterns in tremor script. Please note however that it neither is exhaustive nor should those patterns considered the &#x27;only way&#x27; to perform certain tasks."><meta data-react-helmet="true" property="og:description" content="This document provides a few recipes for common patterns in tremor script. Please note however that it neither is exhaustive nor should those patterns considered the &#x27;only way&#x27; to perform certain tasks."><link data-react-helmet="true" rel="shortcut icon" href="/docs/favicon.ico"><link data-react-helmet="true" rel="canonical" href="https://www.tremor.rs//docs/tremor-script/recipes"><link data-react-helmet="true" rel="alternate" href="https://www.tremor.rs//docs/tremor-script/recipes" hreflang="en"><link data-react-helmet="true" rel="alternate" href="https://www.tremor.rs//docs/tremor-script/recipes" hreflang="x-default"><link rel="stylesheet" href="/assets/css/styles.772104c2.css">
<link rel="preload" href="/assets/js/runtime~main.7c6d918c.js" as="script">
<link rel="preload" href="/assets/js/main.34d2faf0.js" as="script">
</head>
<body data-theme="light">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div><a href="#main" class="skipToContent_1oUP">Skip to main content</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle" type="button" tabindex="0"><svg aria-label="Menu" width="30" height="30" viewBox="0 0 30 30" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a href="https://www.tremor.rs/" target="_self" rel="noopener noreferrer" class="navbar__brand"><img src="/img/tremor-logo.svg" alt="Tremor Logo" class="themedImage_1VuW themedImage--light_3UqQ navbar__logo"><img src="/img/tremor-logo.svg" alt="Tremor Logo" class="themedImage_1VuW themedImage--dark_hz6m navbar__logo"></a><a class="navbar__item navbar__link" href="/getting-started/about/">About Us</a><a class="navbar__item navbar__link navbar__link--active" href="/docs/index">Docs</a><a class="navbar__item navbar__link" href="/blog">Blog</a><a class="navbar__item navbar__link" href="/quick-start">Usage Guide</a><a class="navbar__item navbar__link" href="/api/0">API</a><a class="navbar__item navbar__link" href="/rfc/index">RFCs</a><a class="navbar__item navbar__link" href="/community/community">Community</a><a class="navbar__item navbar__link" href="/community/governance">Governance</a><a class="navbar__item navbar__link" href="/faqs">FAQs</a><div class="navbar__item dropdown dropdown--hoverable dropdown--left"><a class="navbar__item navbar__link" href="/docs/index">0.11</a><ul class="dropdown__menu"><li><a class="dropdown__link" href="/docs/next/tremor-script/recipes">Next</a></li><li><a aria-current="page" class="dropdown__link dropdown__link--active" href="/docs/tremor-script/recipes">0.11</a></li></ul></div></div><div class="navbar__items navbar__items--right"><a href="https://github.com/tremor-rs" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link header-github-link" aria-label="GitHub">GitHub</a><div class="searchWrapper_3rmH"><div class="dsla-search-wrapper"><div class="dsla-search-field"></div></div></div><div class="react-toggle displayOnlyInLargeViewport_GrZ2 react-toggle--disabled" role="button" tabindex="-1"><div class="react-toggle-track"><div class="react-toggle-track-check"><span class="toggle_71bT">ðŸŒœ</span></div><div class="react-toggle-track-x"><span class="toggle_71bT">ðŸŒž</span></div></div><div class="react-toggle-thumb"></div><input type="checkbox" class="react-toggle-screenreader-only" aria-label="Switch between dark and light mode"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div><div class="navbar-sidebar"><div class="navbar-sidebar__brand"><a href="https://www.tremor.rs/" target="_self" rel="noopener noreferrer" class="navbar__brand"><img src="/img/tremor-logo.svg" alt="Tremor Logo" class="themedImage_1VuW themedImage--light_3UqQ navbar__logo"><img src="/img/tremor-logo.svg" alt="Tremor Logo" class="themedImage_1VuW themedImage--dark_hz6m navbar__logo"></a></div><div class="navbar-sidebar__items"><div class="menu"><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" href="/getting-started/about/">About Us</a></li><li class="menu__list-item"><a class="menu__link navbar__link--active" href="/docs/index">Docs</a></li><li class="menu__list-item"><a class="menu__link" href="/blog">Blog</a></li><li class="menu__list-item"><a class="menu__link" href="/quick-start">Usage Guide</a></li><li class="menu__list-item"><a class="menu__link" href="/api/0">API</a></li><li class="menu__list-item"><a class="menu__link" href="/rfc/index">RFCs</a></li><li class="menu__list-item"><a class="menu__link" href="/community/community">Community</a></li><li class="menu__list-item"><a class="menu__link" href="/community/governance">Governance</a></li><li class="menu__list-item"><a class="menu__link" href="/faqs">FAQs</a></li><li class="menu__list-item"><a href="https://github.com/tremor-rs" target="_blank" rel="noopener noreferrer" class="menu__link header-github-link" aria-label="GitHub">GitHub</a></li><li class="menu__list-item"><a role="button" class="menu__link menu__link--sublist">Versions</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" href="/docs/next/tremor-script/recipes">Next</a></li><li class="menu__list-item"><a aria-current="page" class="menu__link menu__link--active" href="/docs/tremor-script/recipes">0.11</a></li></ul></li></ul></div></div></div></nav><div class="main-wrapper docs-wrapper doc-page"><div class="docPage_31aa"><div class="docSidebarContainer_3Kbt" role="complementary"><div class="sidebar_15mo"><div class="menu menu--responsive thin-scrollbar menu_Bmed"><button aria-label="Open menu" aria-haspopup="true" class="button button--secondary button--sm menu__button" type="button"><svg aria-label="Menu" class="sidebarMenuIcon_fgN0" width="24" height="24" viewBox="0 0 30 30" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" href="/docs/index">Tremor</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/overview">Architecture Overview</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/ConstraintsLimitations">Constraints and Limitations</a></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Recepies</a><ul class="menu__list"><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="-1">passthrough</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/recipes/passthrough/README">Passthrough</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="-1">filter</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/recipes/filter/README">Filter</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="-1">transform</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/recipes/transform/README">Transform</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="-1">validate</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/recipes/validate/README">Transform</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="-1">logstash</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/recipes/logstash/README">Transform</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="-1">influx</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/recipes/influx/README">Transform</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="-1">postgres_timescaledb</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/recipes/postgres_timescaledb/README">Transform</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="-1">grafana</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/recipes/grafana/README">Transform</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="-1">syslog_udp</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/recipes/syslog_udp/README">syslog udp</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="-1">syslog_udp_dns</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/recipes/syslog_udp_dns/README">syslog udp dns</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="-1">transient_gd</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/recipes/transient_gd/README">Transient Write-Ahead Log</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="-1">persistent_gd</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/recipes/persistent_gd/README">Persistent Write-Ahead Log</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="-1">roundrobin</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/recipes/roundrobin/README">Round Robin</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="-1">kafka_gd</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/recipes/kafka_gd/README">Kafka delivery guarantees</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="-1">servers_lt_http</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/recipes/servers_lt_http/README">HTTP Server</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="-1">servers_lt_ws</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/recipes/servers_lt_ws/README">Websocket Server</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="-1">proxies_lt_http</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/recipes/proxies_lt_http/README">HTTP Proxy</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="-1">proxies_lt_ws</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/recipes/proxies_lt_ws/README">Websocket Proxy</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="-1">bridges_lt_http_ws</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/recipes/bridges_lt_http_ws/README">HTTP -&gt; Websocket Bridge</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="-1">reverse_proxy_load_balancing</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/recipes/reverse_proxy_load_balancing/README">Reverse proxy with Load Balancing</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="-1">quota_service</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/recipes/quota_service/README">Quota Service</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="-1">configurator</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/recipes/configurator/README">Configurator</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="-1">polling_alerts</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/recipes/polling_alerts/README">Polling</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="-1">kafka_elastic_correlation</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/recipes/kafka_elastic_correlation/README">Ingesting documents from kafka into elastic</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="-1">otel_passthrough</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/recipes/otel_passthrough/README">CNCF OpenTelemetry Passthrough</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="-1">otel_zipkin</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/recipes/otel_zipkin/README">CNCF OpenTelemetry Zipkin Interworking</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="-1">otel_jaeger</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/recipes/otel_jaeger/README">CNCF OpenTelemetry Jaeger Interworking</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="-1">otel_prometheus</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/recipes/otel_prometheus/README">CNCF OpenTelemetry Prometheus Interworking</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="-1">otel_elastic_apm</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/recipes/otel_elastic_apm/README">CNCF OpenTelemetry Elastic APM Interworking</a></li></ul></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/recipes/README">Tremor Workshop</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Operations</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/operations/cli">Tremor cli v0.11</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/operations/configuration-walkthrough">Configuration Walkthrough</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/operations/configuration">Configuring Tremor</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/operations/gdcb">Circuit Breakers and Guaranteed Delivery</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/operations/linked-transports">Linked Transports</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/operations/monitoring">Monitoring</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Artefacts</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/artefacts/codecs">Codecs</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/artefacts/offramps">Offramps</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/artefacts/onramps">Onramps</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/artefacts/postprocessors">Postprocessors</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/artefacts/preprocessors">Preprocessors</a></li></ul></li><li class="menu__list-item"><a class="menu__link menu__link--sublist menu__link--active" href="#!">Tremor Script</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/tremor-script/extractors">Extractors</a></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="0">extractors</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/tremor-script/extractors/base64">Base64</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/tremor-script/extractors/cidr">CIDR</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/tremor-script/extractors/datetime">Datetime</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/tremor-script/extractors/dissect">Dissect</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/tremor-script/extractors/glob">Glob</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/tremor-script/extractors/grok">Grok</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/tremor-script/extractors/influx">Influx</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/tremor-script/extractors/json">JSON</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/tremor-script/extractors/kv">KV</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/tremor-script/extractors/regex">Regex (re)</a></li></ul></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/tremor-script/functions">Functions</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/tremor-script/index">Tremor-Script</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/tremor-script/modules">Modules</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/tremor-script/pp">pp</a></li><li class="menu__list-item"><a aria-current="page" class="menu__link menu__link--active active" tabindex="0" href="/docs/tremor-script/recipes">Recipes</a></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="0">stdlib</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/tremor-script/stdlib/cncf">cncf</a></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="-1">cncf</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/tremor-script/stdlib/cncf/otel">otel</a></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="-1">otel</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/tremor-script/stdlib/cncf/otel/logs">logs</a></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="-1">logs</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/tremor-script/stdlib/cncf/otel/logs/severity">severity</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/tremor-script/stdlib/cncf/otel/logs/traceflags">traceflags</a></li></ul></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/tremor-script/stdlib/cncf/otel/metrics">metrics</a></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="-1">metrics</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/tremor-script/stdlib/cncf/otel/metrics/temporality">temporality</a></li></ul></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/tremor-script/stdlib/cncf/otel/span_id">span_id</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/tremor-script/stdlib/cncf/otel/trace">trace</a></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="-1">trace</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/tremor-script/stdlib/cncf/otel/trace/spankind">spankind</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/tremor-script/stdlib/cncf/otel/trace/status">status</a></li></ul></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/tremor-script/stdlib/cncf/otel/trace_id">trace_id</a></li></ul></li></ul></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/tremor-script/stdlib/std">std</a></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="-1">std</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/tremor-script/stdlib/std/array">array</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/tremor-script/stdlib/std/base64">base64</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/tremor-script/stdlib/std/binary">binary</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/tremor-script/stdlib/std/float">float</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/tremor-script/stdlib/std/integer">integer</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/tremor-script/stdlib/std/json">json</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/tremor-script/stdlib/std/math">math</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/tremor-script/stdlib/std/random">random</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/tremor-script/stdlib/std/range">range</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/tremor-script/stdlib/std/re">re</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/tremor-script/stdlib/std/record">record</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/tremor-script/stdlib/std/string">string</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/tremor-script/stdlib/std/test">test</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/tremor-script/stdlib/std/type">type</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/tremor-script/stdlib/std/url">url</a></li></ul></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/tremor-script/stdlib/tremor">tremor</a></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="-1">tremor</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/tremor-script/stdlib/tremor/chash">chash</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/tremor-script/stdlib/tremor/origin">origin</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/tremor-script/stdlib/tremor/system">system</a></li></ul></li></ul></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Tremor Query</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/tremor-query/functions">Aggregate Functions</a></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="-1">functions</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/tremor-query/functions/stats">The `stats` namespace</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/tremor-query/functions/win">The `win` namespace</a></li></ul></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/tremor-query/index">Tremor-Query</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/tremor-query/modules">Modules</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/tremor-query/operators">Operators</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/tremor-query/pp">pp</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/tremor-query/recipes">Periodic Synthetic Metrics Events</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/tremor-query/walkthrough">Trickle Walkthough</a></li></ul></li><li class="menu__list-item"><a class="menu__link" href="/docs/history">History</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/Glossary">Glossary of Terms</a></li></ul></div></div></div><main class="docMainContainer_3ufF"><div class="container padding-vert--lg docItemWrapper_3FMP"><div class="row"><div class="col docItemCol_3FnS"><div class="docItemContainer_33ec"><article><div><span class="badge badge--secondary">Version: 0.11</span></div><header><h1 class="docTitle_3a4h">Recipes</h1></header><div class="markdown"><p>This document provides a few recipes for common patterns in tremor script. Please note however that it neither is exhaustive nor should those patterns considered the &#x27;only way&#x27; to perform certain tasks.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="extracting-a-raw-message"></a>Extracting a raw message<a class="hash-link" href="#extracting-a-raw-message" title="Direct link to heading">#</a></h2><p>If the event is a unstructured / raw message parsing it can be tricky since we can not match over a string. The following code offers a solution to it:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly tremor"><div tabindex="0" class="prism-code language-tremor codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#393A34;background-color:#f6f8fa"><div class="token-line" style="color:#393A34"><span class="token plain"># event = &quot;John Doe&quot;</span></div><div class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#393A34"><span class="token plain">let event =  match {&quot;message&quot;: event} of</span></div><div class="token-line" style="color:#393A34"><span class="token plain">  case r = %{ message ~= dissect|%{first} %{last}| } =&gt; r.message</span></div><div class="token-line" style="color:#393A34"><span class="token plain">  default =&gt; drop</span></div><div class="token-line" style="color:#393A34"><span class="token plain">end;</span></div><div class="token-line" style="color:#393A34"><span class="token plain"># event = {&quot;first&quot; : &quot;John&quot;, &quot;last&quot;: &quot;Doe&quot;}</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="appending-to-an-array"></a>Appending to an array<a class="hash-link" href="#appending-to-an-array" title="Direct link to heading">#</a></h2><p>When appending to an array we can use the <a href="/docs/tremor-script/stdlib/std/array#pusharray-element"><code>array::push</code></a> function</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly tremor"><div tabindex="0" class="prism-code language-tremor codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#393A34;background-color:#f6f8fa"><div class="token-line" style="color:#393A34"><span class="token plain">use std::array;</span></div><div class="token-line" style="color:#393A34"><span class="token plain"># event = {&quot;key&quot;: &quot;value&quot;, &quot;tags&quot;: [&quot;tag1&quot;]}</span></div><div class="token-line" style="color:#393A34"><span class="token plain">let event.tags = array::push(event.tags, &quot;tag2&quot;);</span></div><div class="token-line" style="color:#393A34"><span class="token plain"># event = {&quot;key&quot;: &quot;value&quot;, &quot;tags&quot;: [&quot;tag1&quot;, &quot;tag2&quot;]}</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="validating-over-extracted-data"></a>Validating over extracted data<a class="hash-link" href="#validating-over-extracted-data" title="Direct link to heading">#</a></h2><p>Sometimes we want to validate over extracted data without forcing the extraction to be a regular expression. For validations like the one below this pattern can be used.</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly tremor"><div tabindex="0" class="prism-code language-tremor codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#393A34;background-color:#f6f8fa"><div class="token-line" style="color:#393A34"><span class="token plain">use std::array;</span></div><div class="token-line" style="color:#393A34"><span class="token plain">match event of</span></div><div class="token-line" style="color:#393A34"><span class="token plain">  # ...</span></div><div class="token-line" style="color:#393A34"><span class="token plain">  case r = %{message ~= dissect|%{log_level} %{log_timestamp}: %{logger}: %{message}|} when array::contains([&quot;ERROR&quot;, &quot;WARN&quot;, &quot;INFO&quot;, &quot;DEBUG&quot;], result.message.log_level) =&gt; let event = merge event of r.message end</span></div><div class="token-line" style="color:#393A34"><span class="token plain">  # ...</span></div><div class="token-line" style="color:#393A34"><span class="token plain">end</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><p>Here we extract the <code>log_level</code> and validate of that the it is one of <code>ERROR</code>, <code>WARN</code>, <code>INFO</code> or <code>DEBUG</code> by moving the check into the when guard we don&#x27;t need to use a regular expression for this validation instead can use array membership.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="replacing-a-field-with-an-extraction"></a>Replacing a field with an extraction<a class="hash-link" href="#replacing-a-field-with-an-extraction" title="Direct link to heading">#</a></h2><p>When extracting a field to merge with with the event and wanting to remove the extracted field we can take advantage of the <code>merge</code> expressions behaviour that it will treat <code>null</code> in merged records as a command to delete the data by setting the field to replace to <code>null</code> before merging.</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly tremor"><div tabindex="0" class="prism-code language-tremor codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#393A34;background-color:#f6f8fa"><div class="token-line" style="color:#393A34"><span class="token plain"># event = %{&quot;message&quot;: &quot;John Doe&quot;}</span></div><div class="token-line" style="color:#393A34"><span class="token plain">let event = merge event of match event of</span></div><div class="token-line" style="color:#393A34"><span class="token plain">  case r = %{message ~= dissect|%{first} %{last}| } =&gt; let r = r.message, let r.message = null, r</span></div><div class="token-line" style="color:#393A34"><span class="token plain">  default =&gt; {}</span></div><div class="token-line" style="color:#393A34"><span class="token plain">end;</span></div><div class="token-line" style="color:#393A34"><span class="token plain"># event = %{&quot;first&quot;: &quot;John&quot;, &quot;last&quot;: &quot;Doe&quot;}</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="no-effect-on-non-matching-case"></a>No effect on non matching case<a class="hash-link" href="#no-effect-on-non-matching-case" title="Direct link to heading">#</a></h2><p>If we use merge with match we can make the <code>default</code> case to have no effect by using <code>{}</code>. This is possible since <code>merge</code> on <code>{}</code> is a identity function.</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly tremor"><div tabindex="0" class="prism-code language-tremor codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#393A34;background-color:#f6f8fa"><div class="token-line" style="color:#393A34"><span class="token plain"># event = %{&quot;message&quot;: &quot;John Doe&quot;}</span></div><div class="token-line" style="color:#393A34"><span class="token plain">let event = merge event of match event of</span></div><div class="token-line" style="color:#393A34"><span class="token plain">  case r = %{message ~= dissect|%{first} %{midle} %{last}| } =&gt; let r = r.message, let r.message = null, r</span></div><div class="token-line" style="color:#393A34"><span class="token plain">  default =&gt; {}</span></div><div class="token-line" style="color:#393A34"><span class="token plain">end;</span></div><div class="token-line" style="color:#393A34"><span class="token plain"># event = %{&quot;message&quot;: &quot;John Doe&quot;}</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="boolean-decisions"></a>Boolean decisions<a class="hash-link" href="#boolean-decisions" title="Direct link to heading">#</a></h2><p>To make boolean decisions we can match on <code>true</code> or <code>false</code>.</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly tremor"><div tabindex="0" class="prism-code language-tremor codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#393A34;background-color:#f6f8fa"><div class="token-line" style="color:#393A34"><span class="token plain">use std::type;</span></div><div class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#393A34"><span class="token plain">match type::is_record(event) of</span></div><div class="token-line" style="color:#393A34"><span class="token plain">  case true =&gt; let event_type = &quot;record&quot;</span></div><div class="token-line" style="color:#393A34"><span class="token plain">  case false =&gt; let event_type = &quot;other&quot;</span></div><div class="token-line" style="color:#393A34"><span class="token plain">end</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="diverting-an-event-to-a-different-channel"></a>Diverting an event to a different channel<a class="hash-link" href="#diverting-an-event-to-a-different-channel" title="Direct link to heading">#</a></h2><p>By default the <code>tremor-script</code> operator forwards all events that are not dropped to the <code>out</code> channel for further processing. However it is possible to route events to different channels using the <code>emit</code> keyword. This allows, for example, diverting certain events to reserve bandwidth for a more important subset.</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly tremor"><div tabindex="0" class="prism-code language-tremor codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#393A34;background-color:#f6f8fa"><div class="token-line" style="color:#393A34"><span class="token plain">match event.importance of</span></div><div class="token-line" style="color:#393A34"><span class="token plain">  case &quot;high&quot; =&gt; emit # this is the same as emit event =&gt; &quot;out&quot;</span></div><div class="token-line" style="color:#393A34"><span class="token plain">  case &quot;medium&quot; =&gt; emit event =&gt; &quot;divert&quot;</span></div><div class="token-line" style="color:#393A34"><span class="token plain">  default =&gt; drop # deletes the event</span></div><div class="token-line" style="color:#393A34"><span class="token plain">end</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="the-null-default"></a>The &#x27;null default&#x27;<a class="hash-link" href="#the-null-default" title="Direct link to heading">#</a></h2><p>When the result of a match statement isn&#x27;t needed - as in we use it purely for it&#x27;s side effects - and we want the <code>default</code> to have no effect we can use <code>null</code> here.</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly tremor"><div tabindex="0" class="prism-code language-tremor codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#393A34;background-color:#f6f8fa"><div class="token-line" style="color:#393A34"><span class="token plain">match event of</span></div><div class="token-line" style="color:#393A34"><span class="token plain">  case %{ tags ~= [&quot;high-priority&quot;]} =&gt; let event.importance = &quot;high&quot;</span></div><div class="token-line" style="color:#393A34"><span class="token plain">  default =&gt; null</span></div><div class="token-line" style="color:#393A34"><span class="token plain">end</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="testing-against-the-type-of-a-field"></a>Testing against the type of a field<a class="hash-link" href="#testing-against-the-type-of-a-field" title="Direct link to heading">#</a></h2><p>Sometimes we want to know if a field has a certain type. The <code>type</code> module provides help here but common types such as <code>record</code> or <code>array</code> can be checked using their patterns.</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly tremor"><div tabindex="0" class="prism-code language-tremor codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#393A34;background-color:#f6f8fa"><div class="token-line" style="color:#393A34"><span class="token plain">match event of</span></div><div class="token-line" style="color:#393A34"><span class="token plain">  case %{field ~= %{}} =&gt; emit &quot;event.field is a record&quot;</span></div><div class="token-line" style="color:#393A34"><span class="token plain">  case %{field ~= %[]} =&gt; emit &quot;event.field is a array&quot;</span></div><div class="token-line" style="color:#393A34"><span class="token plain">  case %{} when type::is_record(event.field) =&gt; emit &quot;event.field is a record&quot;</span></div><div class="token-line" style="color:#393A34"><span class="token plain">  case %{} when type::is_array(event.field) =&gt; emit &quot;event.field is a array&quot;</span></div><div class="token-line" style="color:#393A34"><span class="token plain">  case %{} when type::is_number(event.field) =&gt; emit &quot;event.field is a number (float or integer)&quot;</span></div><div class="token-line" style="color:#393A34"><span class="token plain">  case %{} when type::is_integer(event.field) =&gt; emit &quot;event.field is an integer&quot;</span></div><div class="token-line" style="color:#393A34"><span class="token plain">  case %{} when type::is_float(event.field) =&gt; emit &quot;event.field is a float&quot;</span></div><div class="token-line" style="color:#393A34"><span class="token plain">  case %{} when type::is_null(event.field) =&gt; emit &quot;event.field is null (but set)&quot;</span></div><div class="token-line" style="color:#393A34"><span class="token plain">  case %{absent field} =&gt; emit &quot;event.field is not set&quot;</span></div><div class="token-line" style="color:#393A34"><span class="token plain">  # ...</span></div><div class="token-line" style="color:#393A34"><span class="token plain">end</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="routing-messages"></a>Routing messages<a class="hash-link" href="#routing-messages" title="Direct link to heading">#</a></h2><p>Tremor script can be used to route messages by combining the <code>emit</code> feature and the fact that the tremor runtime operator allows different outputs.</p><p>To route to doing a <code>blue</code> / <code>green</code> split based on a field in a record we could use the following code:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly tremor"><div tabindex="0" class="prism-code language-tremor codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#393A34;background-color:#f6f8fa"><div class="token-line" style="color:#393A34"><span class="token plain">match event of</span></div><div class="token-line" style="color:#393A34"><span class="token plain">  case %{key == &quot;blue&quot;} =&gt; emit event =&gt; &quot;blue&quot;</span></div><div class="token-line" style="color:#393A34"><span class="token plain">  case %{key == &quot;green&quot;} =&gt; emit event =&gt; &quot;green&quot;</span></div><div class="token-line" style="color:#393A34"><span class="token plain">  default =&gt; drop</span></div><div class="token-line" style="color:#393A34"><span class="token plain">end</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><div tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#393A34;background-color:#f6f8fa"><div class="token-line" style="color:#393A34"><span class="token plain">define script split_script</span></div><div class="token-line" style="color:#393A34"><span class="token plain">script</span></div><div class="token-line" style="color:#393A34"><span class="token plain">  # see above</span></div><div class="token-line" style="color:#393A34"><span class="token plain">end;</span></div><div class="token-line" style="color:#393A34"><span class="token plain">create script split_script;</span></div><div class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#393A34"><span class="token plain">select event from split_script/blue into out/blue;</span></div><div class="token-line" style="color:#393A34"><span class="token plain">select event from split_script/green into out/green;</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="percentage-drops-of-events"></a>Percentage drops of events<a class="hash-link" href="#percentage-drops-of-events" title="Direct link to heading">#</a></h2><p>To drop a percentage of all events, functions in the <a href="/docs/tremor-script/stdlib/std/random">random</a> module can be used.</p><p>We generate a random number in a range and based on the outcome, we decide whether we want to drop an event or not. Example:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly tremor"><div tabindex="0" class="prism-code language-tremor codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#393A34;background-color:#f6f8fa"><div class="token-line" style="color:#393A34"><span class="token plain"># drop 50% of the events</span></div><div class="token-line" style="color:#393A34"><span class="token plain">match random::integer(0, 100) &lt; 50 of</span></div><div class="token-line" style="color:#393A34"><span class="token plain">  case true =&gt; drop</span></div><div class="token-line" style="color:#393A34"><span class="token plain">  default =&gt; null</span></div><div class="token-line" style="color:#393A34"><span class="token plain">end</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><p>Most of the time, we want to do this only for certain matching events (as opposed to all events).</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly tremor"><div tabindex="0" class="prism-code language-tremor codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#393A34;background-color:#f6f8fa"><div class="token-line" style="color:#393A34"><span class="token plain">let random_number = random::integer(0, 100);</span></div><div class="token-line" style="color:#393A34"><span class="token plain">match event of</span></div><div class="token-line" style="color:#393A34"><span class="token plain">  case %{key == &quot;blue&quot;} when random_number &lt; 25 =&gt; drop   # drop 25% of blue events</span></div><div class="token-line" style="color:#393A34"><span class="token plain">  case %{key == &quot;yellow&quot;} when random_number &lt; 75 =&gt; drop # drop 75% of yellow events</span></div><div class="token-line" style="color:#393A34"><span class="token plain">  case %{key == &quot;red&quot;} =&gt; drop                            # drop 100% of red events</span></div><div class="token-line" style="color:#393A34"><span class="token plain">  default =&gt; null                                         # drop 0% of other events</span></div><div class="token-line" style="color:#393A34"><span class="token plain">end</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="check-if-a-variable-is-presentabsent"></a>Check if a variable is present/absent<a class="hash-link" href="#check-if-a-variable-is-presentabsent" title="Direct link to heading">#</a></h2><p>To check if a variable is present, we can rely on the <code>present</code> keyword (and inversely, <code>absent</code>).</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly tremor"><div tabindex="0" class="prism-code language-tremor codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#393A34;background-color:#f6f8fa"><div class="token-line" style="color:#393A34"><span class="token plain"># matches default case</span></div><div class="token-line" style="color:#393A34"><span class="token plain">match present non_existent_var of</span></div><div class="token-line" style="color:#393A34"><span class="token plain">  case true =&gt; &quot;is present&quot;</span></div><div class="token-line" style="color:#393A34"><span class="token plain">  default =&gt; &quot;not present&quot;</span></div><div class="token-line" style="color:#393A34"><span class="token plain">end;</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><p>Note that this is different from the case where a variable is set to <code>null</code>, for which we can do <a href="/docs/tremor-script/stdlib/std/type#is_nullvalue">function-based</a> checks as well as pattern-match with <a href="/docs/tremor-script/index#match">match</a>.</p><p>Using non-existent variables in contexts other than <code>present</code> or <code>absent</code> will throw an error terminating the script, so this is useful for guarding against that when needed. This is especially useful when working with meta variables as part of tremor runtime, where -- as part of a pipeline node -- we may need to check if a certain meta variable is set or not (eg: from a previous pipeline node) and act accordingly. For such needs, the approach above can be used. Alternatively, we can also rely on <a href="/docs/tremor-script/index#matching-record-patterns">record patterns</a> there:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly tremor"><div tabindex="0" class="prism-code language-tremor codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#393A34;background-color:#f6f8fa"><div class="token-line" style="color:#393A34"><span class="token plain"># tests for presence of $key</span></div><div class="token-line" style="color:#393A34"><span class="token plain">match $ of</span></div><div class="token-line" style="color:#393A34"><span class="token plain">  case %{present key} =&gt; &quot;present&quot;</span></div><div class="token-line" style="color:#393A34"><span class="token plain">  default =&gt; &quot;not present&quot;</span></div><div class="token-line" style="color:#393A34"><span class="token plain">end;</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><p>Since <code>$</code> gives a record with all the meta variable name-value mapping, this works nicely.</p></div></article><div class="margin-vert--xl"><div class="row"><div class="col"><a href="https://github.com/tremor-rs/tremor-new-website/tree/main/versioned_docs/version-0.11/tremor-script/recipes.md" target="_blank" rel="noreferrer noopener"><svg fill="currentColor" height="1.2em" width="1.2em" preserveAspectRatio="xMidYMid meet" role="img" viewBox="0 0 40 40" class="iconEdit_2_ui" aria-label="Edit page"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div></div></div><div class="margin-vert--lg"><nav class="pagination-nav" aria-label="Docs pages navigation"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/docs/tremor-script/pp"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Â« pp</div></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/docs/tremor-script/stdlib/cncf"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">cncf Â»</div></a></div></nav></div></div></div><div class="col col--3"><div class="tableOfContents_35-E thin-scrollbar"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#extracting-a-raw-message" class="table-of-contents__link">Extracting a raw message</a></li><li><a href="#appending-to-an-array" class="table-of-contents__link">Appending to an array</a></li><li><a href="#validating-over-extracted-data" class="table-of-contents__link">Validating over extracted data</a></li><li><a href="#replacing-a-field-with-an-extraction" class="table-of-contents__link">Replacing a field with an extraction</a></li><li><a href="#no-effect-on-non-matching-case" class="table-of-contents__link">No effect on non matching case</a></li><li><a href="#boolean-decisions" class="table-of-contents__link">Boolean decisions</a></li><li><a href="#diverting-an-event-to-a-different-channel" class="table-of-contents__link">Diverting an event to a different channel</a></li><li><a href="#the-null-default" class="table-of-contents__link">The &#39;null default&#39;</a></li><li><a href="#testing-against-the-type-of-a-field" class="table-of-contents__link">Testing against the type of a field</a></li><li><a href="#routing-messages" class="table-of-contents__link">Routing messages</a></li><li><a href="#percentage-drops-of-events" class="table-of-contents__link">Percentage drops of events</a></li><li><a href="#check-if-a-variable-is-presentabsent" class="table-of-contents__link">Check if a variable is present/absent</a></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Docs</div><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/quick-start/">Quick Start</a></li><li class="footer__item"><a class="footer__link-item" href="/faqs/">FAQs</a></li><li class="footer__item"><a class="footer__link-item" href="/api/0">Tremor API</a></li><li class="footer__item"><a class="footer__link-item" href="/community/governance/CodeofConduct">Code of Conduct</a></li></ul></div><div class="col footer__col"><div class="footer__title">Community</div><ul class="footer__items"><li class="footer__item"><a href="https://chat.tremor.rs/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Discord</a></li><li class="footer__item"><a href="https://twitter.com/TremorDEBS" target="_blank" rel="noopener noreferrer" class="footer__link-item">Twitter</a></li></ul></div><div class="col footer__col"><div class="footer__title">More</div><ul class="footer__items"><li class="footer__item"><a href="https://github.com/tremor-rs" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub</a></li><li class="footer__item"><a href="https://github.com/tremor-rs/tremor-runtime/releases" target="_blank" rel="noopener noreferrer" class="footer__link-item">Download</a></li><li class="footer__item"><a href="https://www.cncf.io/" target="_blank" rel="noreferrer noopener" aria-label="CNCF"><img src="/img/cncf-color.svg" alt="CNCF" style="width: 200px;"></a></li></ul></div></div><div class="footer__bottom text--center"><div class="margin-bottom--sm"><img src="/favicon.ico" alt="Tremor Logo" class="themedImage_1VuW themedImage--light_3UqQ footer__logo"><img src="/favicon.ico" alt="Tremor Logo" class="themedImage_1VuW themedImage--dark_hz6m footer__logo"></div><div class="footer__copyright">Copyright Â© 2021 Tremor</div></div></div></footer></div>
<script src="/assets/js/runtime~main.7c6d918c.js"></script>
<script src="/assets/js/main.34d2faf0.js"></script>
</body>
</html>