<!doctype html>
<html lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-beta.ff31de0ff">
<link rel="alternate" type="application/rss+xml" href="/tremor-new-website/blog/rss.xml" title="Tremor Blog RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/tremor-new-website/blog/atom.xml" title="Tremor Blog Atom Feed"><title data-react-helmet="true">Trickle Walkthough | Tremor</title><meta data-react-helmet="true" property="og:url" content="https://tremor-rs.github.io//tremor-new-website/docs/tremor-query/walkthrough"><meta data-react-helmet="true" name="docusaurus_locale" content="en"><meta data-react-helmet="true" name="docusaurus_version" content="current"><meta data-react-helmet="true" name="docusaurus_tag" content="docs-default-current"><meta data-react-helmet="true" property="og:title" content="Trickle Walkthough | Tremor"><meta data-react-helmet="true" name="description" content="---"><meta data-react-helmet="true" property="og:description" content="---"><link data-react-helmet="true" rel="shortcut icon" href="/tremor-new-website/docs/favicon.ico"><link data-react-helmet="true" rel="canonical" href="https://tremor-rs.github.io//tremor-new-website/docs/tremor-query/walkthrough"><link data-react-helmet="true" rel="alternate" href="https://tremor-rs.github.io//tremor-new-website/docs/tremor-query/walkthrough" hreflang="en"><link data-react-helmet="true" rel="alternate" href="https://tremor-rs.github.io//tremor-new-website/docs/tremor-query/walkthrough" hreflang="x-default"><link rel="stylesheet" href="/tremor-new-website/assets/css/styles.64b546b3.css">
<link rel="preload" href="/tremor-new-website/assets/js/runtime~main.b448f7ef.js" as="script">
<link rel="preload" href="/tremor-new-website/assets/js/main.b3671989.js" as="script">
</head>
<body data-theme="light">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div><a href="#main" class="skipToContent_1oUP">Skip to main content</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle" type="button" tabindex="0"><svg aria-label="Menu" width="30" height="30" viewBox="0 0 30 30" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a href="https://tremor-rs.github.io/tremor-new-website/" target="_self" rel="noopener noreferrer" class="navbar__brand"><img src="/tremor-new-website/img/tremor-logo.png" alt="Tremor Logo" class="themedImage_1VuW themedImage--light_3UqQ navbar__logo"><img src="/tremor-new-website/img/tremor-logo.png" alt="Tremor Logo" class="themedImage_1VuW themedImage--dark_hz6m navbar__logo"></a><a class="navbar__item navbar__link" href="/tremor-new-website/getting-started/about/">About Us</a><a class="navbar__item navbar__link navbar__link--active" href="/tremor-new-website/docs/index">Docs</a><a class="navbar__item navbar__link" href="/tremor-new-website/blog">Blog</a><a class="navbar__item navbar__link" href="/tremor-new-website/quick-start">Usage Guide</a><a class="navbar__item navbar__link" href="/tremor-new-website/api/0">API</a><a class="navbar__item navbar__link" href="/tremor-new-website/rfcs/rfcs">RFCs</a><a class="navbar__item navbar__link" href="/tremor-new-website/community/community">Community</a><a class="navbar__item navbar__link" href="/tremor-new-website/governance">Governance</a><a class="navbar__item navbar__link" href="/tremor-new-website/faqs">FAQs</a><div class="navbar__item dropdown dropdown--hoverable dropdown--left"><a class="navbar__item navbar__link" href="/tremor-new-website/docs/Artefacts/codecs">Next</a><ul class="dropdown__menu"><li><a aria-current="page" class="dropdown__link dropdown__link--active" href="/tremor-new-website/docs/tremor-query/walkthrough">Next</a></li><li><a aria-current="page" class="dropdown__link dropdown__link--active" href="/tremor-new-website/docs/">All versions</a></li></ul></div></div><div class="navbar__items navbar__items--right"><a href="https://github.com/tremor-rs" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link header-github-link" aria-label="GitHub">GitHub</a><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a href="#" class="navbar__item navbar__link"><span><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" width="20" height="20" style="vertical-align:text-bottom;margin-right:5px"><path fill="currentColor" d="M19.753 10.909c-.624-1.707-2.366-2.726-4.661-2.726-.09 0-.176.002-.262.006l-.016-2.063 3.525-.607c.115-.019.133-.119.109-.231-.023-.111-.167-.883-.188-.976-.027-.131-.102-.127-.207-.109-.104.018-3.25.461-3.25.461l-.013-2.078c-.001-.125-.069-.158-.194-.156l-1.025.016c-.105.002-.164.049-.162.148l.033 2.307s-3.061.527-3.144.543c-.084.014-.17.053-.151.143.019.09.19 1.094.208 1.172.018.08.072.129.188.107l2.924-.504.035 2.018c-1.077.281-1.801.824-2.256 1.303-.768.807-1.207 1.887-1.207 2.963 0 1.586.971 2.529 2.328 2.695 3.162.387 5.119-3.06 5.769-4.715 1.097 1.506.256 4.354-2.094 5.98-.043.029-.098.129-.033.207l.619.756c.08.096.206.059.256.023 2.51-1.73 3.661-4.515 2.869-6.683zm-7.386 3.188c-.966-.121-.944-.914-.944-1.453 0-.773.327-1.58.876-2.156a3.21 3.21 0 011.229-.799l.082 4.277a2.773 2.773 0 01-1.243.131zm2.427-.553l.046-4.109c.084-.004.166-.01.252-.01.773 0 1.494.145 1.885.361.391.217-1.023 2.713-2.183 3.758zm-8.95-7.668a.196.196 0 00-.196-.145h-1.95a.194.194 0 00-.194.144L.008 16.916c-.017.051-.011.076.062.076h1.733c.075 0 .099-.023.114-.072l1.008-3.318h3.496l1.008 3.318c.016.049.039.072.113.072h1.734c.072 0 .078-.025.062-.076-.014-.05-3.083-9.741-3.494-11.04zm-2.618 6.318l1.447-5.25 1.447 5.25H3.226z"></path></svg><span>en</span></span></a><ul class="dropdown__menu"><li><a href="/tremor-new-website/docs/tremor-query/walkthrough" target="_self" rel="noopener noreferrer" class="dropdown__link dropdown__link--active" style="text-transform:capitalize">en</a></li></ul></div><div class="searchWrapper_3rmH"><div class="dsla-search-wrapper"><div class="dsla-search-field"></div></div></div><div class="react-toggle displayOnlyInLargeViewport_GrZ2 react-toggle--disabled" role="button" tabindex="-1"><div class="react-toggle-track"><div class="react-toggle-track-check"><span class="toggle_71bT">ðŸŒœ</span></div><div class="react-toggle-track-x"><span class="toggle_71bT">ðŸŒž</span></div></div><div class="react-toggle-thumb"></div><input type="checkbox" class="react-toggle-screenreader-only" aria-label="Switch between dark and light mode"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div><div class="navbar-sidebar"><div class="navbar-sidebar__brand"><a href="https://tremor-rs.github.io/tremor-new-website/" target="_self" rel="noopener noreferrer" class="navbar__brand"><img src="/tremor-new-website/img/tremor-logo.png" alt="Tremor Logo" class="themedImage_1VuW themedImage--light_3UqQ navbar__logo"><img src="/tremor-new-website/img/tremor-logo.png" alt="Tremor Logo" class="themedImage_1VuW themedImage--dark_hz6m navbar__logo"></a></div><div class="navbar-sidebar__items"><div class="menu"><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" href="/tremor-new-website/getting-started/about/">About Us</a></li><li class="menu__list-item"><a class="menu__link navbar__link--active" href="/tremor-new-website/docs/index">Docs</a></li><li class="menu__list-item"><a class="menu__link" href="/tremor-new-website/blog">Blog</a></li><li class="menu__list-item"><a class="menu__link" href="/tremor-new-website/quick-start">Usage Guide</a></li><li class="menu__list-item"><a class="menu__link" href="/tremor-new-website/api/0">API</a></li><li class="menu__list-item"><a class="menu__link" href="/tremor-new-website/rfcs/rfcs">RFCs</a></li><li class="menu__list-item"><a class="menu__link" href="/tremor-new-website/community/community">Community</a></li><li class="menu__list-item"><a class="menu__link" href="/tremor-new-website/governance">Governance</a></li><li class="menu__list-item"><a class="menu__link" href="/tremor-new-website/faqs">FAQs</a></li><li class="menu__list-item"><a href="https://github.com/tremor-rs" target="_blank" rel="noopener noreferrer" class="menu__link header-github-link" aria-label="GitHub">GitHub</a></li><li class="menu__list-item"><a role="button" class="menu__link menu__link--sublist">Versions</a><ul class="menu__list"><li class="menu__list-item"><a aria-current="page" class="menu__link menu__link--active" href="/tremor-new-website/docs/tremor-query/walkthrough">Next</a></li><li class="menu__list-item"><a aria-current="page" class="menu__link menu__link--active" href="/tremor-new-website/docs/">All versions</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a href="#" role="button" class="menu__link menu__link--sublist"><span><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" width="20" height="20" style="vertical-align:text-bottom;margin-right:5px"><path fill="currentColor" d="M19.753 10.909c-.624-1.707-2.366-2.726-4.661-2.726-.09 0-.176.002-.262.006l-.016-2.063 3.525-.607c.115-.019.133-.119.109-.231-.023-.111-.167-.883-.188-.976-.027-.131-.102-.127-.207-.109-.104.018-3.25.461-3.25.461l-.013-2.078c-.001-.125-.069-.158-.194-.156l-1.025.016c-.105.002-.164.049-.162.148l.033 2.307s-3.061.527-3.144.543c-.084.014-.17.053-.151.143.019.09.19 1.094.208 1.172.018.08.072.129.188.107l2.924-.504.035 2.018c-1.077.281-1.801.824-2.256 1.303-.768.807-1.207 1.887-1.207 2.963 0 1.586.971 2.529 2.328 2.695 3.162.387 5.119-3.06 5.769-4.715 1.097 1.506.256 4.354-2.094 5.98-.043.029-.098.129-.033.207l.619.756c.08.096.206.059.256.023 2.51-1.73 3.661-4.515 2.869-6.683zm-7.386 3.188c-.966-.121-.944-.914-.944-1.453 0-.773.327-1.58.876-2.156a3.21 3.21 0 011.229-.799l.082 4.277a2.773 2.773 0 01-1.243.131zm2.427-.553l.046-4.109c.084-.004.166-.01.252-.01.773 0 1.494.145 1.885.361.391.217-1.023 2.713-2.183 3.758zm-8.95-7.668a.196.196 0 00-.196-.145h-1.95a.194.194 0 00-.194.144L.008 16.916c-.017.051-.011.076.062.076h1.733c.075 0 .099-.023.114-.072l1.008-3.318h3.496l1.008 3.318c.016.049.039.072.113.072h1.734c.072 0 .078-.025.062-.076-.014-.05-3.083-9.741-3.494-11.04zm-2.618 6.318l1.447-5.25 1.447 5.25H3.226z"></path></svg><span>Languages</span></span></a><ul class="menu__list"><li class="menu__list-item"><a href="/tremor-new-website/docs/tremor-query/walkthrough" target="_self" rel="noopener noreferrer" class="menu__link dropdown__link--active" style="text-transform:capitalize">en</a></li></ul></li></ul></div></div></div></nav><div class="main-wrapper docs-wrapper doc-page"><div class="docPage_31aa"><div class="docSidebarContainer_3Kbt" role="complementary"><div class="sidebar_15mo"><div class="menu menu--responsive thin-scrollbar menu_Bmed"><button aria-label="Open menu" aria-haspopup="true" class="button button--secondary button--sm menu__button" type="button"><svg aria-label="Menu" class="sidebarMenuIcon_fgN0" width="24" height="24" viewBox="0 0 30 30" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><ul class="menu__list"><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Artefacts</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/tremor-new-website/docs/Artefacts/codecs">Codecs</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/tremor-new-website/docs/Artefacts/offramps">Offramps</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/tremor-new-website/docs/Artefacts/onramps">Onramps</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/tremor-new-website/docs/Artefacts/postprocessors">Postprocessors</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/tremor-new-website/docs/Artefacts/preprocessors">Preprocessors</a></li></ul></li><li class="menu__list-item"><a class="menu__link" href="/tremor-new-website/docs/ConstraintsLimitations">Constraints and Limitations</a></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Development</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/tremor-new-website/docs/Development/benchmarking">Benchmarking</a></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="-1">benchmarks</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/tremor-new-website/docs/Development/benchmarks/LogstashBenchmark">Logstash Benchmark</a></li></ul></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/tremor-new-website/docs/Development/debugging">Debugging Tremor</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/tremor-new-website/docs/Development/issue-investigation">issue-investigation</a></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="-1">process</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/tremor-new-website/docs/Development/process/contributions">contributions</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/tremor-new-website/docs/Development/process/patches">patches</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/tremor-new-website/docs/Development/process/release">release</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/tremor-new-website/docs/Development/process/reporting-bugs">reporting-bugs</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/tremor-new-website/docs/Development/process/rfc">Requests for Proposals</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/tremor-new-website/docs/Development/process/running-tests">Running Tests</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/tremor-new-website/docs/Development/process/security-bugs">security-bugs</a></li></ul></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/tremor-new-website/docs/Development/profiling">Profiling Tremor</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/tremor-new-website/docs/Development/quick-start">Quick Start Guide</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/tremor-new-website/docs/Development/testing">Testing</a></li></ul></li><li class="menu__list-item"><a class="menu__link" href="/tremor-new-website/docs/FeatureComparison">FEATURE COMPARISON</a></li><li class="menu__list-item"><a class="menu__link" href="/tremor-new-website/docs/Glossary">Glossary of Terms</a></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Governance</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/tremor-new-website/docs/Governance/CII">CNCF Core Infrastructure Initiative</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/tremor-new-website/docs/Governance/CodeofConduct">The Tremor Code of Conduct</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/tremor-new-website/docs/Governance/Contributing">Contributing to Tremor</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Operations</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/tremor-new-website/docs/Operations/cli">Tremor cli v0.11</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/tremor-new-website/docs/Operations/configuration-walkthrough">Configuration Walkthrough</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/tremor-new-website/docs/Operations/configuration">Configuring Tremor</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/tremor-new-website/docs/Operations/gdcb">Circuit Breakers and Guaranteed Delivery</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/tremor-new-website/docs/Operations/linked-transports">Linked Transports</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/tremor-new-website/docs/Operations/monitoring">Monitoring</a></li></ul></li><li class="menu__list-item"><a class="menu__link" href="/tremor-new-website/docs/QA">1 What should we use as a community collaboration environment?</a></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Workshop</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/tremor-new-website/docs/Workshop/README">Tremor Workshop</a></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="-1">examples</a><ul class="menu__list"><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="-1">passthrough</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/tremor-new-website/docs/Workshop/examples/passthrough/README">Passthrough</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="-1">filter</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/tremor-new-website/docs/Workshop/examples/filter/README">Filter</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="-1">transform</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/tremor-new-website/docs/Workshop/examples/transform/README">Transform</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="-1">validate</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/tremor-new-website/docs/Workshop/examples/validate/README">Transform</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="-1">logstash</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/tremor-new-website/docs/Workshop/examples/logstash/README">Transform</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="-1">influx</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/tremor-new-website/docs/Workshop/examples/influx/README">Transform</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="-1">postgres_timescaledb</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/tremor-new-website/docs/Workshop/examples/postgres_timescaledb/README">Transform</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="-1">grafana</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/tremor-new-website/docs/Workshop/examples/grafana/README">Transform</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="-1">syslog_udp</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/tremor-new-website/docs/Workshop/examples/syslog_udp/README">syslog udp</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="-1">syslog_udp_dns</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/tremor-new-website/docs/Workshop/examples/syslog_udp_dns/README">syslog udp dns</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="-1">transient_gd</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/tremor-new-website/docs/Workshop/examples/transient_gd/README">Transient Write-Ahead Log</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="-1">persistent_gd</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/tremor-new-website/docs/Workshop/examples/persistent_gd/README">Persistent Write-Ahead Log</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="-1">roundrobin</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/tremor-new-website/docs/Workshop/examples/roundrobin/README">Round Robin</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="-1">kafka_gd</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/tremor-new-website/docs/Workshop/examples/kafka_gd/README">Kafka delivery guarantees</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="-1">servers_lt_http</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/tremor-new-website/docs/Workshop/examples/servers_lt_http/README">HTTP Server</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="-1">servers_lt_ws</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/tremor-new-website/docs/Workshop/examples/servers_lt_ws/README">Websocket Server</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="-1">proxies_lt_http</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/tremor-new-website/docs/Workshop/examples/proxies_lt_http/README">HTTP Proxy</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="-1">proxies_lt_ws</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/tremor-new-website/docs/Workshop/examples/proxies_lt_ws/README">Websocket Proxy</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="-1">bridges_lt_http_ws</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/tremor-new-website/docs/Workshop/examples/bridges_lt_http_ws/README">HTTP -&gt; Websocket Bridge</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="-1">reverse_proxy_load_balancing</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/tremor-new-website/docs/Workshop/examples/reverse_proxy_load_balancing/README">Reverse proxy with Load Balancing</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="-1">quota_service</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/tremor-new-website/docs/Workshop/examples/quota_service/README">Quota Service</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="-1">configurator</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/tremor-new-website/docs/Workshop/examples/configurator/README">Configurator</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="-1">polling_alerts</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/tremor-new-website/docs/Workshop/examples/polling_alerts/README">Polling</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="-1">kafka_elastic_correlation</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/tremor-new-website/docs/Workshop/examples/kafka_elastic_correlation/README">Ingesting documents from kafka into elastic</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="-1">otel_passthrough</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/tremor-new-website/docs/Workshop/examples/otel_passthrough/README">CNCF OpenTelemetry Passthrough</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="-1">otel_zipkin</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/tremor-new-website/docs/Workshop/examples/otel_zipkin/README">CNCF OpenTelemetry Zipkin Interorking</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="-1">otel_jaeger</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/tremor-new-website/docs/Workshop/examples/otel_jaeger/README">CNCF OpenTelemetry Jaeger Interworking</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="-1">otel_prometheus</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/tremor-new-website/docs/Workshop/examples/otel_prometheus/README">CNCF OpenTelemetry Prometheus Interworking</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="-1">otel_elastic_apm</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/tremor-new-website/docs/Workshop/examples/otel_elastic_apm/README">CNCF OpenTelemetry Elastic APM Interworking</a></li></ul></li></ul></li></ul></li><li class="menu__list-item"><a class="menu__link" href="/tremor-new-website/docs/benchmarking">Benchmarking</a></li><li class="menu__list-item"><a class="menu__link" href="/tremor-new-website/docs/history">History</a></li><li class="menu__list-item"><a class="menu__link" href="/tremor-new-website/docs/index">Tremor</a></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">internal</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/tremor-new-website/docs/internal/running-docusaurus">Running Docusaurus</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/tremor-new-website/docs/internal/transform">Match to Functional</a></li></ul></li><li class="menu__list-item"><a class="menu__link" href="/tremor-new-website/docs/overview">Architecture Overview</a></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">policies</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/tremor-new-website/docs/policies/security">Security</a></li></ul></li><li class="menu__list-item"><a class="menu__link menu__link--sublist menu__link--active" href="#!">tremor-query</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/tremor-new-website/docs/tremor-query/functions">Aggregate Functions</a></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="0">functions</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/tremor-new-website/docs/tremor-query/functions/stats">The `stats` namespace</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/tremor-new-website/docs/tremor-query/functions/win">The `win` namespace</a></li></ul></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/tremor-new-website/docs/tremor-query/index">Tremor-Query</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/tremor-new-website/docs/tremor-query/modules">Modules</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/tremor-new-website/docs/tremor-query/operators">Operators</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/tremor-new-website/docs/tremor-query/pp">pp</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/tremor-new-website/docs/tremor-query/recipes">Periodic Synthetic Metrics Events</a></li><li class="menu__list-item"><a aria-current="page" class="menu__link menu__link--active active" tabindex="0" href="/tremor-new-website/docs/tremor-query/walkthrough">Trickle Walkthough</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">tremor-script</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/tremor-new-website/docs/tremor-script/extractors">Extractors</a></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="-1">extractors</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/tremor-new-website/docs/tremor-script/extractors/base64">Base64</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/tremor-new-website/docs/tremor-script/extractors/cidr">CIDR</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/tremor-new-website/docs/tremor-script/extractors/datetime">Datetime</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/tremor-new-website/docs/tremor-script/extractors/dissect">Dissect</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/tremor-new-website/docs/tremor-script/extractors/glob">Glob</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/tremor-new-website/docs/tremor-script/extractors/grok">Grok</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/tremor-new-website/docs/tremor-script/extractors/influx">Influx</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/tremor-new-website/docs/tremor-script/extractors/json">JSON</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/tremor-new-website/docs/tremor-script/extractors/kv">KV</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/tremor-new-website/docs/tremor-script/extractors/regex">Regex (re)</a></li></ul></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/tremor-new-website/docs/tremor-script/functions">Functions</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/tremor-new-website/docs/tremor-script/index">Tremor-Script</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/tremor-new-website/docs/tremor-script/modules">Modules</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/tremor-new-website/docs/tremor-script/pp">pp</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/tremor-new-website/docs/tremor-script/recipes">Recipes</a></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="-1">stdlib</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/tremor-new-website/docs/tremor-script/stdlib/cncf">cncf</a></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="-1">cncf</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/tremor-new-website/docs/tremor-script/stdlib/cncf/otel">otel</a></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="-1">otel</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/tremor-new-website/docs/tremor-script/stdlib/cncf/otel/logs">logs</a></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="-1">logs</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/tremor-new-website/docs/tremor-script/stdlib/cncf/otel/logs/severity">severity</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/tremor-new-website/docs/tremor-script/stdlib/cncf/otel/logs/traceflags">traceflags</a></li></ul></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/tremor-new-website/docs/tremor-script/stdlib/cncf/otel/metrics">metrics</a></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="-1">metrics</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/tremor-new-website/docs/tremor-script/stdlib/cncf/otel/metrics/temporality">temporality</a></li></ul></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/tremor-new-website/docs/tremor-script/stdlib/cncf/otel/span_id">span_id</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/tremor-new-website/docs/tremor-script/stdlib/cncf/otel/trace">trace</a></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="-1">trace</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/tremor-new-website/docs/tremor-script/stdlib/cncf/otel/trace/spankind">spankind</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/tremor-new-website/docs/tremor-script/stdlib/cncf/otel/trace/status">status</a></li></ul></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/tremor-new-website/docs/tremor-script/stdlib/cncf/otel/trace_id">trace_id</a></li></ul></li></ul></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/tremor-new-website/docs/tremor-script/stdlib/std">std</a></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="-1">std</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/tremor-new-website/docs/tremor-script/stdlib/std/array">array</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/tremor-new-website/docs/tremor-script/stdlib/std/base64">base64</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/tremor-new-website/docs/tremor-script/stdlib/std/binary">binary</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/tremor-new-website/docs/tremor-script/stdlib/std/float">float</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/tremor-new-website/docs/tremor-script/stdlib/std/integer">integer</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/tremor-new-website/docs/tremor-script/stdlib/std/json">json</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/tremor-new-website/docs/tremor-script/stdlib/std/math">math</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/tremor-new-website/docs/tremor-script/stdlib/std/path">path</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/tremor-new-website/docs/tremor-script/stdlib/std/random">random</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/tremor-new-website/docs/tremor-script/stdlib/std/range">range</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/tremor-new-website/docs/tremor-script/stdlib/std/re">re</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/tremor-new-website/docs/tremor-script/stdlib/std/record">record</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/tremor-new-website/docs/tremor-script/stdlib/std/string">string</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/tremor-new-website/docs/tremor-script/stdlib/std/test">test</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/tremor-new-website/docs/tremor-script/stdlib/std/type">type</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/tremor-new-website/docs/tremor-script/stdlib/std/url">url</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/tremor-new-website/docs/tremor-script/stdlib/std/win">win</a></li></ul></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/tremor-new-website/docs/tremor-script/stdlib/tremor">tremor</a></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="-1">tremor</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/tremor-new-website/docs/tremor-script/stdlib/tremor/chash">chash</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/tremor-new-website/docs/tremor-script/stdlib/tremor/origin">origin</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/tremor-new-website/docs/tremor-script/stdlib/tremor/system">system</a></li></ul></li></ul></li></ul></li></ul></div></div></div><main class="docMainContainer_3ufF"><div class="container padding-vert--lg docItemWrapper_3FMP"><div class="row"><div class="col docItemCol_3FnS"><div class="docItemContainer_33ec"><article><header><h1 class="docTitle_3a4h">Trickle Walkthough</h1></header><div class="markdown"><hr><p>In this section we walk through increasingly complex tremor query language ( trickle )
programming examples, introducing key concepts as we progress.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="overview"></a>Overview<a class="hash-link" href="#overview" title="Direct link to heading">#</a></h2><p>Trickle is a near real-time stream-based structured query language that
builds on the tremor scripting language.</p><p>Trickle queries are compiled in pipeline DAGs and replace the yaml pipeline
format used in previous versions to describe event processing graphs in
the tremor runtime.</p><p>The most basic query possible in trickle is</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly trickle"><div tabindex="0" class="prism-code language-trickle codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#393A34;background-color:#f6f8fa"><div class="token-line" style="color:#393A34"><span class="token plain">select event from in into out; # A basic passthrough query pipeline</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><p>The <code>event</code> keyword selects the event from the standard input stream <code>in</code>
and passes it through unchanged to the standard output stream <code>out</code>.</p><p>In tremor&#x27;s trickle query language queries are compiled and optimised and
data is streamed though the query. Data can be passed through, transformed,
filtered, aggregated, branched or combined to form continuous stream processing
algorithms.</p><p>Like other event processing languages, trickle <em>inverts</em> the relationship between
query and data when compared to normal RDBMS SQL languages. Instead of running a
dynamic query against static in memory or disk persisted data, we compile and
optimise queries and stream near real-time data through each query.</p><p>Data can be ingested from the outside world via the &#x27;in&#x27; standard stream.
Data can be produced to the outside world via the &#x27;out&#x27; standard stream.
Errors can be processed through the &#x27;err&#x27; standard stream.</p><p>These three primitives are analogous to the <code>stdin</code>, <code>stdout</code> and <code>stderr</code> streams
in UNIX-like systems. These can be chained or interconnected via connecting multiple
statements together to form a directed acyclic graph.</p><p>We can branch inputs using <code>where</code> and <code>having</code> clauses as filters to logically
partition streams into independent processing streams.</p><p>In the below example we partition events by their <code>seq_num</code> field. If the number
is even, we branch the corresponding events into a stream named <code>evens</code>. If the
number is odd, we branch to a stream named <code>odds</code>.</p><p>The logical inverse of branching is to unify or union streams together, this operation
is also supported via the select operation and is demonstrated below. We combine
the <code>evens</code> and <code>odds</code> streams into the standard output stream</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly trickle"><div tabindex="0" class="prism-code language-trickle codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#393A34;background-color:#f6f8fa"><div class="token-line" style="color:#393A34"><span class="token plain"># create private intermediate internal streams</span></div><div class="token-line" style="color:#393A34"><span class="token plain">create stream evens;</span></div><div class="token-line" style="color:#393A34"><span class="token plain">create stream odds;</span></div><div class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#393A34"><span class="token plain"># branch input into even/odd sequenced events using where clause</span></div><div class="token-line" style="color:#393A34"><span class="token plain">select { &quot;even&quot;: event } from in where (event.seq_num %2 == 1) into evens;</span></div><div class="token-line" style="color:#393A34"><span class="token plain">select { &quot;odd&quot;: event } from in where (event.seq_num %2 == 0) into odds;</span></div><div class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#393A34"><span class="token plain"># combine / union evens and odds into standard out stream</span></div><div class="token-line" style="color:#393A34"><span class="token plain">select event from evens into out;</span></div><div class="token-line" style="color:#393A34"><span class="token plain">select event from odds into out;</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><p>We can test this with a json event using the <code>tremor</code> command line tool</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly json"><div tabindex="0" class="prism-code language-json codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#393A34;background-color:#f6f8fa"><div class="token-line" style="color:#393A34"><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> </span><span class="token property" style="color:#36acaa">&quot;seq_num&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">4</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token property" style="color:#36acaa">&quot;value&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">10</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token property" style="color:#36acaa">&quot;group&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;horse&quot;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">}</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><p>Assuming the trickle query is stored in a file called <code>evenodd.trickle</code> with the sample event
in a file called <code>data.json</code></p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly bash"><div tabindex="0" class="prism-code language-bash codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#393A34;background-color:#f6f8fa"><div class="token-line" style="color:#393A34"><span class="token plain">$ tremor run evenodd.trickle -i data.json</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><p>The command line tool will inject all events from the file provided by the <code>-i</code> argument and we would
expect to see output from the tool as follows:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly bash"><div tabindex="0" class="prism-code language-bash codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#393A34;background-color:#f6f8fa"><div class="token-line" style="color:#393A34"><span class="token punctuation" style="color:#393A34">{</span><span class="token string" style="color:#e3116c">&quot;odd&quot;</span><span class="token builtin class-name">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token string" style="color:#e3116c">&quot;seq_num&quot;</span><span class="token builtin class-name">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">4</span><span class="token plain">, </span><span class="token string" style="color:#e3116c">&quot;value&quot;</span><span class="token builtin class-name">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">10</span><span class="token plain">, </span><span class="token string" style="color:#e3116c">&quot;group&quot;</span><span class="token builtin class-name">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;horse&quot;</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">}</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="scripts-and-operators"></a>Scripts and Operators<a class="hash-link" href="#scripts-and-operators" title="Direct link to heading">#</a></h2><p>Here&#x27;s the logic for an entire backpressure algorithm that could be introduced as
a proxy between two systems, implemented by using a builtin operator called <a href="/tremor-new-website/docs/tremor-query/operators#qosbackpressure"><code>qos::backpressure</code></a>:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly trickle"><div tabindex="0" class="prism-code language-trickle codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#393A34;background-color:#f6f8fa"><div class="token-line" style="color:#393A34"><span class="token plain">define qos::backpressure operator bp</span></div><div class="token-line" style="color:#393A34"><span class="token plain">with</span></div><div class="token-line" style="color:#393A34"><span class="token plain">    timeout = 10000,</span></div><div class="token-line" style="color:#393A34"><span class="token plain">    steps = [ 1, 50, 100, 250, 750 ],</span></div><div class="token-line" style="color:#393A34"><span class="token plain">end;</span></div><div class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#393A34"><span class="token plain">create operator bp from bp;</span></div><div class="token-line" style="color:#393A34"><span class="token plain">select event from in into bp;</span></div><div class="token-line" style="color:#393A34"><span class="token plain">select event from bp into out;</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><p>A slightly more complex example that uses both operators and the tremor scripting language
with the query language all together:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly tremor"><div tabindex="0" class="prism-code language-tremor codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#393A34;background-color:#f6f8fa"><div class="token-line" style="color:#393A34"><span class="token plain">define grouper::bucket operator kfc;</span></div><div class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#393A34"><span class="token plain">define script categorize</span></div><div class="token-line" style="color:#393A34"><span class="token plain">script</span></div><div class="token-line" style="color:#393A34"><span class="token plain">  let $rate = 1;</span></div><div class="token-line" style="color:#393A34"><span class="token plain">  let $class = event.`group`;</span></div><div class="token-line" style="color:#393A34"><span class="token plain">  { &quot;event&quot;: event, &quot;rate&quot;: $rate, &quot;class&quot;: $class };</span></div><div class="token-line" style="color:#393A34"><span class="token plain">end;</span></div><div class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#393A34"><span class="token plain">create operator kfc from kfc;</span></div><div class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#393A34"><span class="token plain"># where script definition and instance name are the same, we can</span></div><div class="token-line" style="color:#393A34"><span class="token plain"># omit the from clause in operator and script &#x27;create&#x27; statements</span></div><div class="token-line" style="color:#393A34"><span class="token plain">create script categorize;</span></div><div class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#393A34"><span class="token plain"># Stream ingested data into categorize script</span></div><div class="token-line" style="color:#393A34"><span class="token plain">select event from in into categorize;</span></div><div class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#393A34"><span class="token plain"># Stream scripted events into kfc bucket operator</span></div><div class="token-line" style="color:#393A34"><span class="token plain">select event from categorize into kfc;</span></div><div class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#393A34"><span class="token plain"># Stream bucketed events into out stream</span></div><div class="token-line" style="color:#393A34"><span class="token plain">select event from kfc into out;</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><p>Operators are defined as <code>&lt;module&gt;::&lt;name&gt;</code> in the
context of an operator definition clause. Operators, like script definitions can take arguments.</p><p>Definitions in tremor are non-executing. They should be considered as templates or specifications.</p><p>In the query language, any <code>define</code> clause creates specifications, possibly with arguments for
specialization. They are typically incarnated via the <code>create</code> clause. Anything that is <code>create</code>ed
will form a stream or node in the query graph - these <em>do</em> consume memory and participate in a
pipeline query algorithm.</p><p>So in the above example, the <code>categorize</code> script and the <code>categorize</code> node have both a definition
or specification <strong>and</strong> an instance node that participates in the graph at runtime. It is often
convenient to use the same name where there is only one instance of an operator of a given type.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="building-query-graph-algorithms"></a>Building Query Graph Algorithms<a class="hash-link" href="#building-query-graph-algorithms" title="Direct link to heading">#</a></h2><p>Data streams can be branched and combined in the trickle query language via
the select statement. The resulting graphs must be acyclic with no direct or
indirect looping cycles.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="branching"></a>Branching<a class="hash-link" href="#branching" title="Direct link to heading">#</a></h3><p>Branching data streams to multiple streams is performed via select operations</p><p>Branch data into 3 different output stream ports</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly tremor"><div tabindex="0" class="prism-code language-tremor codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#393A34;background-color:#f6f8fa"><div class="token-line" style="color:#393A34"><span class="token plain">select event from in into out/a;</span></div><div class="token-line" style="color:#393A34"><span class="token plain">select event from in into out/b;</span></div><div class="token-line" style="color:#393A34"><span class="token plain">select event from in into out/c;</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><p>Branch data into 3 different intermediate streams</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly tremor"><div tabindex="0" class="prism-code language-tremor codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#393A34;background-color:#f6f8fa"><div class="token-line" style="color:#393A34"><span class="token plain">create stream a;</span></div><div class="token-line" style="color:#393A34"><span class="token plain">create stream b;</span></div><div class="token-line" style="color:#393A34"><span class="token plain">create stream c;</span></div><div class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#393A34"><span class="token plain">select event from in into a;</span></div><div class="token-line" style="color:#393A34"><span class="token plain">select event from in into b;</span></div><div class="token-line" style="color:#393A34"><span class="token plain">select event from in into c;</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="combining"></a>Combining<a class="hash-link" href="#combining" title="Direct link to heading">#</a></h2><p>Multiple data streams can also be combined via select operations.</p><p>Combine 3 data streams into a single output stream</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly tremor"><div tabindex="0" class="prism-code language-tremor codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#393A34;background-color:#f6f8fa"><div class="token-line" style="color:#393A34"><span class="token plain">...</span></div><div class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#393A34"><span class="token plain">select event from a into out;</span></div><div class="token-line" style="color:#393A34"><span class="token plain">select event from b into out;</span></div><div class="token-line" style="color:#393A34"><span class="token plain">select event from c into out;</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><p>Combine 3 data stream ports from 1 or many streams into a single output stream</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly tremor"><div tabindex="0" class="prism-code language-tremor codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#393A34;background-color:#f6f8fa"><div class="token-line" style="color:#393A34"><span class="token plain">...</span></div><div class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#393A34"><span class="token plain">select event from a/1 into out;</span></div><div class="token-line" style="color:#393A34"><span class="token plain">select event from a/2 into out;</span></div><div class="token-line" style="color:#393A34"><span class="token plain">select event from b into out;</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="aggregations"></a>Aggregations<a class="hash-link" href="#aggregations" title="Direct link to heading">#</a></h2><p>A key feature of the tremor query language are aggregations. These are supported with:</p><ul><li>Windows - A window is a range of events, clock or data time. There can be many different types of windows.</li><li>Aggregate functions - An aggregate function is a function that runs in the context of a window of events, emitting results intermittently</li><li>Tilt Frames - A tilt frame is a chain of compatible windows with <strong>decreasing</strong> resolution used to reduce memory pressure and preserve relative accuracy of windowed aggregate functions</li></ul><p>An example clock-driven tumbling window:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><div tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#393A34;background-color:#f6f8fa"><div class="token-line" style="color:#393A34"><span class="token plain">define tumbling window `15secs`</span></div><div class="token-line" style="color:#393A34"><span class="token plain">with</span></div><div class="token-line" style="color:#393A34"><span class="token plain">   interval = core::datetime::with_seconds(15),</span></div><div class="token-line" style="color:#393A34"><span class="token plain">end;</span></div><div class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#393A34"><span class="token plain">select {</span></div><div class="token-line" style="color:#393A34"><span class="token plain">    &quot;count&quot;: aggr::stats::count(), # Aggregate &#x27;count&#x27; function</span></div><div class="token-line" style="color:#393A34"><span class="token plain">    &quot;min&quot;: aggr::stats::min(event.value),</span></div><div class="token-line" style="color:#393A34"><span class="token plain">    &quot;max&quot;: aggr::stats::max(event.value),</span></div><div class="token-line" style="color:#393A34"><span class="token plain">    &quot;mean&quot;: aggr::stats::mean(event.value),</span></div><div class="token-line" style="color:#393A34"><span class="token plain">    &quot;stdev&quot;: aggr::stats::stdev(event.value),</span></div><div class="token-line" style="color:#393A34"><span class="token plain">    &quot;var&quot;: aggr::stats::var(event.value),</span></div><div class="token-line" style="color:#393A34"><span class="token plain">}</span></div><div class="token-line" style="color:#393A34"><span class="token plain">from in[`15secs`] # We apply the window nominally to streams</span></div><div class="token-line" style="color:#393A34"><span class="token plain">into out;</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><p>To use a window we need to define the window specifications, such as a 15 second clock-based
tumbling window called <code>15secs</code> as above. We can then create instances of these windows at runtime by
applying those windows to streams. This is done in the <code>from</code> clause of a <code>select</code> statement.</p><p>Wherever windows are applied, aggregate functions can be used. In the above example, we are calculating
the minimum, maximum, average, standard deviation and variance of a <code>value</code> numeric field in data streaming
into the query via the standard input stream.</p><p>The query language is not constrained to clock-driven window definitions. Windows can also be
data-driven or fully programmatic.</p><p>A more complete example:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly tremor"><div tabindex="0" class="prism-code language-tremor codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#393A34;background-color:#f6f8fa"><div class="token-line" style="color:#393A34"><span class="token plain">select {</span></div><div class="token-line" style="color:#393A34"><span class="token plain">    &quot;measurement&quot;: event.measurement,</span></div><div class="token-line" style="color:#393A34"><span class="token plain">    &quot;tags&quot;: patch event.tags of insert &quot;window&quot; =&gt; window end,</span></div><div class="token-line" style="color:#393A34"><span class="token plain">    &quot;stats&quot;: aggr::stats::hdr(event.fields[group[2]], [ &quot;0.5&quot;, &quot;0.9&quot;, &quot;0.99&quot;, &quot;0.999&quot; ]),</span></div><div class="token-line" style="color:#393A34"><span class="token plain">    &quot;class&quot;: group[2],</span></div><div class="token-line" style="color:#393A34"><span class="token plain">    &quot;timestamp&quot;: aggr::win::first(event.timestamp),</span></div><div class="token-line" style="color:#393A34"><span class="token plain">}</span></div><div class="token-line" style="color:#393A34"><span class="token plain">from in[`10secs`, `1min`, `10min`, `1h`]</span></div><div class="token-line" style="color:#393A34"><span class="token plain">where event.measurement == &quot;udp_lb_test&quot;</span></div><div class="token-line" style="color:#393A34"><span class="token plain">   or event.measurement == &quot;kafka-proxy.endpoints&quot;</span></div><div class="token-line" style="color:#393A34"><span class="token plain">   or event.measurement == &quot;burrow_group&quot;</span></div><div class="token-line" style="color:#393A34"><span class="token plain">   or event.measurement == &quot;burrow_partition&quot;</span></div><div class="token-line" style="color:#393A34"><span class="token plain">   or event.measurement == &quot;burrow_topic&quot;</span></div><div class="token-line" style="color:#393A34"><span class="token plain">group by set(event.measurement, event.tags, each(record::keys(event.fields)))</span></div><div class="token-line" style="color:#393A34"><span class="token plain">into normalize;</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><p>In the above example we use a single aggregate function called <code>aggr::stats::hdr</code> which uses a high dynamic range
or HDR Histogram to compute quantile estimates and basic statistics against a number of dynamic grouping fields
set by the <code>group</code> clause. A group clause effectively partitions our operation by the group expressions provided
by the trickle query programmer. In the example, we&#x27;re using the field names of the nested &#x27;fields&#x27; record on inbound
events to compose a component of a group that is also qualified by tags and a measurement name. The field component
is used as a numeric input to the histogram aggregate function.</p><p>In the <code>from</code> clause, we are using a tilt frame, or a succession of window resolutions over which this aggregate
function is producing results. So a <code>10secs</code> window is emitting on a 10-second repeating basis into a <code>1min</code> frame.
So 6 times per second the state of the 10 second window is merged into the <code>1min</code> frame. This merge process is
performed for each frame in the tilt frame.</p><p>The advantage of tilt-frames is that as the target expression is <strong>the same</strong> for each frame, we can <em>merge</em> across
each frame without amplifying error - in short, we get the <strong>effect</strong> of summarisation without loss of accuracy.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="aggregation-mechanics"></a>Aggregation Mechanics<a class="hash-link" href="#aggregation-mechanics" title="Direct link to heading">#</a></h2><p>The mechanics of aggregation in the query language are non-trivial.</p><p>A high level non-normative summary follows.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="windowing"></a>Windowing<a class="hash-link" href="#windowing" title="Direct link to heading">#</a></h3><p>Assuming a periodic event delivered every 2 seconds into tremor.</p><p><img alt="tumbling-event-windows.png" src="/tremor-new-website/assets/images/tumbling-event-windows-0c396bde4a1226bc661003e2bfee0ebd.png"></p><p>A size based window of size 2 would emit a synthetic output event every 2 events.
So the lifespan of a size based window is 2 events, repeated and non-overlapping for tumbling style windows.
In the illustration above events <code>1</code> and <code>2</code> in the first window <code>w0</code> produce a single synthetic or derivate event <code>a</code>
Events <code>3</code> and <code>4</code> in the second window <code>w1</code> produce a single synthetic or derivate event <code>b</code>
As there is no 6th event in the example illustration, we will <em>never</em> get another synthetic output event</p><p>Contrast this with the 10 second or clock-based tumbling window. In the first window <code>w0</code>s lifetime we capture
all events in the illustration.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="tilt-frames"></a>Tilt Frames<a class="hash-link" href="#tilt-frames" title="Direct link to heading">#</a></h3><p>Assuming a continuous flow of events into tremor...</p><p><img alt="tilt-frame-mechanics.png" src="/tremor-new-website/assets/images/tilt-frame-mechanics-ad37cfa0eab92e84ec9838c364ceef1b.png"></p><p>All the synthetic outputs of successive 5 minute windows that fit into a 15 minute interval are <strong>merged</strong>
into the 15 minute window. All the outputs of successive 15 minute intervals that fit into a 1 hour interval
are <strong>merged</strong> into the 1 hour window. By chaining and merging, tremor can optimise ( reduce ) the amount
of memory required across the chain when compared to multiple independent windows <code>select</code> expressions.
In the case of aggregate functions like <code>aggr::stats::hdr`` or</code>aggr::stats::dds``` the savings are significant.</p><p>If we imagine 1M events per second, that is 300M events every 5 minutes. 900M every 15, 3.6B every hour.</p><p>By using tilt frames we can maximally minimize internal memory consumption, whilst reducing the volume of
incremental computation ( per event, per frame ), and further whilst preserving relative accuracy for
merge-capable aggregate functions.</p><p>The converged statistics under merge exhibit the same relative accuracy at a fraction of the computational
and memory overhead without the using the tilt-frame mechanism.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="group-mechanics"></a>Group Mechanics<a class="hash-link" href="#group-mechanics" title="Direct link to heading">#</a></h2><p>The <code>group by</code> clause in the query language partitions streams before windows and tilt frames
are applied. Groups can be set-based, each-based or composites thereof.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="set-based-grouping"></a>Set based grouping<a class="hash-link" href="#set-based-grouping" title="Direct link to heading">#</a></h3><p>Grouping by set partitions streams by a concatenation of expressions.</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly tremor"><div tabindex="0" class="prism-code language-tremor codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#393A34;background-color:#f6f8fa"><div class="token-line" style="color:#393A34"><span class="token plain">select event from in</span></div><div class="token-line" style="color:#393A34"><span class="token plain">group by set(event.country, event.region)</span></div><div class="token-line" style="color:#393A34"><span class="token plain">into out;</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><p>In the example expression we are partitioning into a composite group that is
composed of the country and region of each inbound event.</p><p>So we expect data of the following form</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly json"><div tabindex="0" class="prism-code language-json codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#393A34;background-color:#f6f8fa"><div class="token-line" style="color:#393A34"><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> </span><span class="token property" style="color:#36acaa">&quot;country&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;US&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token property" style="color:#36acaa">&quot;region&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;east&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token property" style="color:#36acaa">&quot;az&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;1&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> ... </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> </span><span class="token property" style="color:#36acaa">&quot;country&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;US&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token property" style="color:#36acaa">&quot;region&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;east&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token property" style="color:#36acaa">&quot;az&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;2&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> ... </span><span class="token punctuation" style="color:#393A34">}</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="each-based-grouping"></a>Each based grouping<a class="hash-link" href="#each-based-grouping" title="Direct link to heading">#</a></h3><p>Given that our data can be nested, however, our data could be structured differently:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly json"><div tabindex="0" class="prism-code language-json codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#393A34;background-color:#f6f8fa"><div class="token-line" style="color:#393A34"><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token property" style="color:#36acaa">&quot;country&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;US&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">  regions</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token property" style="color:#36acaa">&quot;east&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;1&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;2&quot;</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">  ...</span></div><div class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly tremor"><div tabindex="0" class="prism-code language-tremor codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#393A34;background-color:#f6f8fa"><div class="token-line" style="color:#393A34"><span class="token plain">select event from in</span></div><div class="token-line" style="color:#393A34"><span class="token plain">group by each(record::keys(event.regions))</span></div><div class="token-line" style="color:#393A34"><span class="token plain">into out;</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><p>Each field in the nested <code>locations</code> field becomes a component of our
set and qualified by country ...</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="limitations"></a>Limitations<a class="hash-link" href="#limitations" title="Direct link to heading">#</a></h3><p>There are cases however that are currently complex to partition with a
single select statement due to limitations with the grouping clause. For example
what if we wanted to make availability zones a component of our group partitions?</p><p>How would we structure such a query?</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly json"><div tabindex="0" class="prism-code language-json codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#393A34;background-color:#f6f8fa"><div class="token-line" style="color:#393A34"><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token property" style="color:#36acaa">&quot;country&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;US&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">  regions</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token property" style="color:#36acaa">&quot;east&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;1&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;2&quot;</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> # AZs by region</span></div><div class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">  ...</span></div><div class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly tremor"><div tabindex="0" class="prism-code language-tremor codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#393A34;background-color:#f6f8fa"><div class="token-line" style="color:#393A34"><span class="token plain">create stream by_country_region;</span></div><div class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#393A34"><span class="token plain">select { &quot;country&quot;: event.country, &quot;region&quot;: group[0], &quot;azs&quot;: event.regions[group[0]] }</span></div><div class="token-line" style="color:#393A34"><span class="token plain">from in</span></div><div class="token-line" style="color:#393A34"><span class="token plain">group by each(record::keys(event.regions))</span></div><div class="token-line" style="color:#393A34"><span class="token plain">into by_country_region;</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><p>We can preprocess our inbound stream and collapse our locations
sub-record a single level by hoisting the <code>region</code> field to the
top level of a synthetic intermediate outbound stream <code>by_country_region</code>.</p><p>We can postprocess the intermediate stream <code>by_country_region</code> into a
single outbound stream that further extracts and hoists the &#x27;az&#x27; dimension</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly tremor"><div tabindex="0" class="prism-code language-tremor codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#393A34;background-color:#f6f8fa"><div class="token-line" style="color:#393A34"><span class="token plain">select { &quot;country&quot;: event.country, &quot;region&quot;: event.region, &quot;az&quot;: group[0], }</span></div><div class="token-line" style="color:#393A34"><span class="token plain">from by_country_region</span></div><div class="token-line" style="color:#393A34"><span class="token plain">group by each(event.azs)</span></div><div class="token-line" style="color:#393A34"><span class="token plain">into out;</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><p>So, we need 2 select statements to compose a solution where there are multiple
nesting levels via successive extraction of group components. The same principle
works with more complex grouping requirements.</p><p>Once the grouping mechanics are resolved, windowing, aggregation and tilt-frames
can be applied to further refine queries.</p></div></article><div class="margin-vert--xl"><div class="row"><div class="col"><a href="https://github.com/tremor-rs/tremor-new-website/tree/main/docs/tremor-query/walkthrough.md" target="_blank" rel="noreferrer noopener"><svg fill="currentColor" height="1.2em" width="1.2em" preserveAspectRatio="xMidYMid meet" role="img" viewBox="0 0 40 40" class="iconEdit_2_ui" aria-label="Edit page"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div></div></div><div class="margin-vert--lg"><nav class="pagination-nav" aria-label="Docs pages navigation"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/tremor-new-website/docs/tremor-query/recipes"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Â« Periodic Synthetic Metrics Events</div></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/tremor-new-website/docs/tremor-script/extractors"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Extractors Â»</div></a></div></nav></div></div></div><div class="col col--3"><div class="tableOfContents_35-E thin-scrollbar"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#overview" class="table-of-contents__link">Overview</a></li><li><a href="#scripts-and-operators" class="table-of-contents__link">Scripts and Operators</a></li><li><a href="#building-query-graph-algorithms" class="table-of-contents__link">Building Query Graph Algorithms</a><ul><li><a href="#branching" class="table-of-contents__link">Branching</a></li></ul></li><li><a href="#combining" class="table-of-contents__link">Combining</a></li><li><a href="#aggregations" class="table-of-contents__link">Aggregations</a></li><li><a href="#aggregation-mechanics" class="table-of-contents__link">Aggregation Mechanics</a><ul><li><a href="#windowing" class="table-of-contents__link">Windowing</a></li><li><a href="#tilt-frames" class="table-of-contents__link">Tilt Frames</a></li></ul></li><li><a href="#group-mechanics" class="table-of-contents__link">Group Mechanics</a><ul><li><a href="#set-based-grouping" class="table-of-contents__link">Set based grouping</a></li><li><a href="#each-based-grouping" class="table-of-contents__link">Each based grouping</a></li><li><a href="#limitations" class="table-of-contents__link">Limitations</a></li></ul></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Docs</div><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/tremor-new-website/quick-start/">Quick Start</a></li><li class="footer__item"><a class="footer__link-item" href="/tremor-new-website/faqs/">FAQs</a></li><li class="footer__item"><a class="footer__link-item" href="/tremor-new-website/api/">Tremor API</a></li><li class="footer__item"><a class="footer__link-item" href="/tremor-new-website/docs/Governance/CodeOfConduct/">Code of Conduct</a></li></ul></div><div class="col footer__col"><div class="footer__title">Community</div><ul class="footer__items"><li class="footer__item"><a href="https://chat.tremor.rs/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Discord</a></li><li class="footer__item"><a href="https://twitter.com/TremorDEBS" target="_blank" rel="noopener noreferrer" class="footer__link-item">Twitter</a></li></ul></div><div class="col footer__col"><div class="footer__title">More</div><ul class="footer__items"><li class="footer__item"><a href="https://github.com/tremor-rs" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub</a></li><li class="footer__item"><a href="https://github.com/tremor-rs/tremor-runtime/releases" target="_blank" rel="noopener noreferrer" class="footer__link-item">Download</a></li><li class="footer__item"><a href="https://www.cncf.io/" target="_blank" rel="noreferrer noopener" aria-label="CNCF"><img src="cncf-color.svg" alt="CNCF"></a></li></ul></div></div><div class="footer__bottom text--center"><div class="margin-bottom--sm"><img src="/tremor-new-website/favicon.ico" alt="Tremor Logo" class="themedImage_1VuW themedImage--light_3UqQ footer__logo"><img src="/tremor-new-website/favicon.ico" alt="Tremor Logo" class="themedImage_1VuW themedImage--dark_hz6m footer__logo"></div><div class="footer__copyright">Copyright Â© 2021 Tremor</div></div></div></footer></div>
<script src="/tremor-new-website/assets/js/runtime~main.b448f7ef.js"></script>
<script src="/tremor-new-website/assets/js/main.b3671989.js"></script>
</body>
</html>